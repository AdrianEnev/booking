import{f as u}from"./useFetchAppointments-DsUODtBA.js";const h=async(a,o,n)=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return alert("Please enter a valid email address."),!1;if(!/^(?:\+359|0)(?:8[7-9])[0-9]{7}$/.test(o))return alert("Please enter a valid phone number."),!1;if(!/^[a-zA-Zа-яА-ЯёЁ\s]+$/.test(n))return alert("Please enter a valid name. (Example: Адриан Енев)"),!1},g=async(a,o,n,i,p,s,c,f,e,r)=>{let d=!1;r&&(d=!0);try{const t=await fetch("https://booking-app.fly.dev/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerName:a,customerPhone:o,customerEmail:n,service:i,date:p,hour:s,note:c,appointmentVerified:d})});if(!t.ok)return console.error("Response error booking appointment:",t),f(!1),null;const m=await u();m&&localStorage.setItem("bookedAppointments",JSON.stringify(m));const l=await t.json();if(l.message=="hour-already-booked"){if(r){alert("Този час вече е зает!"),e("/admin/dashboard");return}e("/booking"),alert(`Този час бе зает от някой друг, току що! (${s})`);return}if(l.message=="email-already-used"){if(r){alert("Този имейл вече е използван!");return}e("/"),alert("Вече имаш запазен час!");return}if(l.message=="error-creating-appointment"){if(r){alert("Възникна грешка!"),e("/admin/dashboard");return}e("/"),alert("Грешка! Опитай отново по-късно!");return}if(alert("Записването е успешно!"),r){e("/admin/dashboard");return}e("/")}catch(t){return console.error("Error booking appointment:",t),f(!1),null}};export{g as p,h as v};
